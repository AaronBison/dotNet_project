@page "/clients/{id}"

@using DataLibrary
@using DataLibrary.Models

@inject NavigationManager NavigationManager
@inject IClientsData _db

<h3>Edit Client</h3>

<EditForm Model="client" OnSubmit="@UpdateClient" style="width:400px;">

    <div class="form-group">
        <label>Id</label>
        <input id="id" class="form-control" value="@client.ClientId" readonly />
    </div>

    <div class="form-group">
        <label>Id</label>
        <InputText id="name" class="form-control" name="name" @bind-Value="client.Name"/>
        <InputText id="phonenumber" class="form-control" name="phonenumber" @bind-Value="client.PhoneNumber"/>
        <InputText id="emailaddress" class="form-control" name="emailaddress" @bind-Value="client.EmailAddress"/>
        <InputText id="cnp" class="form-control" name="cnp" @bind-Value="client.CNP"/>
        <InputText id="address" class="form-control" name="address" @bind-Value="client.Address"/>
        <InputText id="notes" class="form-control" name="notes" @bind-Value="client.Notes"/>
    </div>

    <button type="submit" class="btn btn-primary">Update</button>
</EditForm>

@code {
    [Parameter]
    public string Id { get; set; }

    private ClientModel client;

    protected override void OnInitialized()
    {
        client = _db.GetClient(Id);
    }

    private void UpdateClient()
    {
        _db.UpdateClient(client);
        NavigationManager.NavigateTo("/clients");
    }
}
